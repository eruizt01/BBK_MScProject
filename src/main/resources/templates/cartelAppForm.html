<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Cartel Investigation</title>
</head>
<body>

<!-- Back to Home Link -->
<a th:href="@{/}">Back to Home</a>

<h1>Cartel Investigation</h1>

<!-- Dropdown for choosing the action -->
<select id="actionSelector">
    <option value="updateDB">Update/Modify Database</option>
    <option value="fastQueries">Make Fast Queries</option>
</select>

<!-- Container for Update/Modify Database -->
<div id="updateDB" style="display:block;">
    <h2>Create New Person</h2>
    <form action="#" th:action="@{/cartelApp/createPerson}" th:object="${person}" method="post">
        <div>
            <label for="name">Name:</label>
            <input type="text" id="name" name="name" th:field="*{name}" />
        </div>
        <div>
            <label for="surname">Surname:</label>
            <input type="text" id="surname" name="surname" th:field="*{surname}" />
        </div>
        <div>
            <label for="age">Age:</label>
            <input type="number" id="age" name="age" th:field="*{age}" />
        </div>
        <div>
            <label for="role">Role:</label>
            <input type="text" id="role" name="role" th:field="*{role}" />
        </div>
        <div>
            <label for="email_account">Email:</label>
            <input type="email" id="email_account" name="email_account" th:field="*{email_account}" />
        </div>
        <div>
            <label for="phone_number">Phone Number:</label>
            <input type="text" id="phone_number" name="phone_number" th:field="*{phone_number}" />
        </div>
        <div>
            <button type="submit">Submit</button>
        </div>
    </form>

    <h2>All Persons</h2>
    <table>
        <thead>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Age</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="person : ${allPersons}">
            <td th:text="${person.id}"></td>
            <td th:text="${person.name}"></td>
            <td th:text="${person.age}"></td>
            <td>
                <a th:href="@{/cartelApp/deletePerson/{id}(id=${person.id})}">Delete</a>
            </td>
        </tr>
        </tbody>
    </table>
</div>

<!-- Container for Fast Queries -->
<div id="fastQueries" style="display:none;">
    <h2>Fast Queries</h2>
    <p>
    <form action="@{/cartelApp/implementPageRank}" method="post">
        <button type="submit">Run PageRank Algorithm</button>
    </form>
    </p>
    <p>
    <form action="@{/cartelApp/implementBetweennessCentrality}" method="post">
        <button type="submit">Run Betweenness Centrality Algorithm</button>
    </form>
    </p>
    <!-- New Fast Query Options -->
    <p>
        <a href="@{/cartelApp/mostSent}">Find Person with Most Sent Emails</a>
    </p>
    <p>
        <a href="@{/cartelApp/mostReceived}">Find Person with Most Received Emails</a>
    </p>
    <p>
        <a href="@{/cartelApp/topInteractions}">Find Top Email Interactions</a>
    </p>
</div>

<!-- JavaScript to toggle between divs -->
<script>
    document.getElementById("actionSelector").addEventListener("change", function() {
        var updateDBDiv = document.getElementById("updateDB");
        var fastQueriesDiv = document.getElementById("fastQueries");

        if (this.value === "updateDB") {
            updateDBDiv.style.display = "block";
            fastQueriesDiv.style.display = "none";
        } else if (this.value === "fastQueries") {
            updateDBDiv.style.display = "none";
            fastQueriesDiv.style.display = "block";
        }
    });
</script>

</body>
</html>